{"ast":null,"code":"import _classCallCheck from \"C:\\\\final-final\\\\guyzygyweb-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\final-final\\\\guyzygyweb-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\final-final\\\\guyzygyweb-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\final-final\\\\guyzygyweb-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\final-final\\\\guyzygyweb-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\final-final\\\\guyzygyweb-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\final-final\\\\guyzygyweb-master\\\\frontend\\\\src\\\\components\\\\startQuizPage.js\";\nimport React, { Component } from 'react';\nimport logo from '../assets/logo2.png';\nimport './App.css';\nimport { Redirect } from 'react-router';\nimport $ from 'jquery';\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, NavItem, NavLink } from 'reactstrap';\n\nvar startQuizPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(startQuizPage, _Component);\n\n  function startQuizPage(props) {\n    var _this;\n\n    _classCallCheck(this, startQuizPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(startQuizPage).call(this, props));\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      isOpen: false,\n      toStudentGrades: false,\n      toMyQiuzzes: false,\n      toStartQuiz: false,\n      toCreateNewQuiz: false\n    };\n    return _this;\n  }\n\n  _createClass(startQuizPage, [{\n    key: \"toggle\",\n    value: function toggle() {\n      this.setState({\n        isOpen: !this.state.isOpen\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (window.location.href.indexOf('reload') === -1) {\n        window.location.replace(window.location.href + '?reload');\n      }\n\n      if (this.state.toStudentGrades === true) {\n        return React.createElement(Redirect, {\n          to: \"/StudentQuiz\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.toMyQiuzzes === true) {\n        return React.createElement(Redirect, {\n          to: \"/editQuizes\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.toStartQuiz === true) {\n        return React.createElement(Redirect, {\n          to: \"/StudentQuiz\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.toCreateNewQuiz === true) {\n        return React.createElement(Redirect, {\n          to: \"/createQuiz\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"ProfPage\",\n        id: \"profPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        id: \"navbar\",\n        dark: true,\n        expand: \"md\",\n        fixed: \"top\",\n        height: \"40px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(NavbarBrand, {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: logo,\n        alt: \"logo\",\n        height: \"30px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      })), React.createElement(NavbarToggler, {\n        onClick: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(Collapse, {\n        isOpen: this.state.isOpen,\n        navbar: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        className: \"ml-auto\",\n        navbar: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Log out\")), React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        href: \"/profPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"My page\"))))), React.createElement(\"div\", {\n        id: \"mainSection\",\n        className: \"mainSection\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var endpoint = \"http://quyzygy.us/\";\n      $(window).on('load', function () {\n        refreshQuizzes();\n      });\n\n      function refreshQuizzes() {\n        $.get(endpoint + 'myQuizzes?' + getParamCredentials(), function (data) {\n          console.log(data);\n          var html = \"<ol>\";\n\n          for (var i = 0; i < data.length; i++) {\n            html += \"<li>\";\n            html += \"Course: <b>\" + data[i].CourseName + \"</b></br>\";\n            html += \"Quiz name: \" + data[i].QuizName;\n            html += \"</br>Duration: \" + parseInt(data[i].Duration) / 60 + \"m\";\n            html += \"</br><button id='\" + \"act\" + data[i].id + \"'>Activate quiz</button>\";\n            html += \"<button id='\" + \"start\" + data[i].id + \"'> Start quiz</button>\";\n            html += \"</li>\";\n            html += \"<div id='lq\" + data[i].id + \"'></div>\";\n          }\n\n          html += \"</ol>\";\n          $(\"#mainSection\").html(html);\n\n          for (var _i = 0; _i < data.length; _i++) {\n            $(\"#act\" + data[_i].id).on('click', function () {\n              var id = $(this).attr('id').replace('act', '');\n              $.post(endpoint + \"activateQuiz?\" + getParamCredentials() + \"&quizID=\" + id, function (data) {\n                $(\"#act\" + id).attr('disabled', true);\n                console.log(data);\n                $(\"#lq\" + id).html(\"<h4>Access code: \" + data.AccessCode + \"</h4>\");\n                var ws = new WebSocket(\"ws://79.115.188.173:8081\");\n\n                ws.onopen = function (openiningData) {\n                  $(\"#lq\" + id).append(\"Waiting for students to join...\");\n                  $(\"#lq\" + id).append(\"<div id='wssarea'></div>\");\n                };\n\n                ws.onclose = function (closingData) {\n                  console.log(\"Something happened and connection ws#\" + id + \" was closed.\");\n                };\n\n                ws.onmessage = function (message) {\n                  try {\n                    var res = JSON.parse(message.data);\n                    var liveData = res.Data;\n                    console.log(liveData);\n                    $(\"#wssarea\").html(\"\");\n\n                    for (var _i2 = 0; _i2 < Object.keys(liveData).length; _i2++) {\n                      var cc = Object.keys(liveData)[_i2];\n\n                      var cd = liveData[cc];\n                      console.log(cd);\n                      var ci = parseInt(cd.Answers.length);\n                      var ti = ci + parseInt(cd.LeftQuestions.length);\n                      var percent = ci * 100 / ti;\n                      $(\"#wssarea\").append(\"<div class='myProgress'><div class='myBar' style='width:\" + percent + \"%'>\" + ci + \"/\" + ti + \"</div></div>\");\n                    }\n                  } catch (e) {\n                    console.log(e);\n                  }\n                };\n              });\n            });\n            $(\"#start\" + data[_i].id).on('click', function () {\n              var id = $(this).attr('id').replace('start', '');\n              $.post(endpoint + \"startQuiz?\" + getParamCredentials() + \"&quizID=\" + id, function (data) {\n                $(\"#start\" + id).attr('disabled', true);\n                console.log(data);\n              });\n            });\n          }\n        });\n      }\n\n      function getParamCredentials() {\n        return \"sk=\" + localStorage.getItem('sk');\n      }\n    }\n  }]);\n\n  return startQuizPage;\n}(Component);\n\nexport default startQuizPage;","map":{"version":3,"sources":["C:\\final-final\\guyzygyweb-master\\frontend\\src\\components\\startQuizPage.js"],"names":["React","Component","logo","Redirect","$","Collapse","Navbar","NavbarToggler","NavbarBrand","Nav","NavItem","NavLink","startQuizPage","props","toggle","bind","state","isOpen","toStudentGrades","toMyQiuzzes","toStartQuiz","toCreateNewQuiz","setState","window","location","href","indexOf","replace","endpoint","on","refreshQuizzes","get","getParamCredentials","data","console","log","html","i","length","CourseName","QuizName","parseInt","Duration","id","attr","post","AccessCode","ws","WebSocket","onopen","openiningData","append","onclose","closingData","onmessage","message","res","JSON","parse","liveData","Data","Object","keys","cc","cd","ci","Answers","ti","LeftQuestions","percent","e","localStorage","getItem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport logo from '../assets/logo2.png';\r\nimport './App.css';\r\nimport { Redirect } from 'react-router';\r\nimport $ from 'jquery'\r\n\r\nimport {\r\n    Collapse,\r\n    Navbar,\r\n    NavbarToggler,\r\n    NavbarBrand,\r\n    Nav,\r\n    NavItem,\r\n    NavLink,\r\n} from 'reactstrap';\r\n\r\nclass startQuizPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.toggle = this.toggle.bind(this);\r\n        this.state = {\r\n            isOpen: false,\r\n            toStudentGrades: false,\r\n            toMyQiuzzes: false,\r\n            toStartQuiz: false,\r\n            toCreateNewQuiz: false\r\n        };\r\n    }\r\n    toggle() {\r\n        this.setState({\r\n            isOpen: !this.state.isOpen\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        if (window.location.href.indexOf('reload')===-1) {\r\n            window.location.replace(window.location.href+'?reload');\r\n        }\r\n\r\n        if (this.state.toStudentGrades === true) {\r\n            return <Redirect to='/StudentQuiz' />\r\n        }\r\n        if (this.state.toMyQiuzzes === true) {\r\n            return <Redirect to='/editQuizes' />\r\n        }\r\n        if (this.state.toStartQuiz === true) {\r\n            return <Redirect to='/StudentQuiz' />\r\n        }\r\n        if (this.state.toCreateNewQuiz === true) {\r\n            return <Redirect to='/createQuiz' />\r\n        }\r\n\r\n        return (\r\n            <div className=\"ProfPage\" id='profPage'>\r\n\r\n                <Navbar id='navbar' dark expand=\"md\" fixed=\"top\" height='40px'>\r\n                    <NavbarBrand href=\"/\">\r\n                        <img src={logo} alt=\"logo\" height='30px'/>\r\n                    </NavbarBrand>\r\n                    <NavbarToggler onClick={this.toggle} />\r\n                    <Collapse isOpen={this.state.isOpen} navbar>\r\n                        <Nav className=\"ml-auto\" navbar>\r\n                            <NavItem>\r\n                                <NavLink href=\"/\">Log out</NavLink>\r\n                            </NavItem>\r\n                            <NavItem>\r\n                                <NavLink href=\"/profPage\">My page</NavLink>\r\n                            </NavItem>\r\n                        </Nav>\r\n                    </Collapse>\r\n                </Navbar>\r\n\r\n                <div id='mainSection' className='mainSection'>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    componentDidMount () {\r\n        var endpoint = \"http://quyzygy.us/\";\r\n\r\n        $(window).on('load', function(){\r\n            refreshQuizzes();\r\n        });\r\n\r\n        function refreshQuizzes(){\r\n            $.get(endpoint + 'myQuizzes?' + getParamCredentials() , function(data){\r\n                console.log(data);\r\n                let html = \"<ol>\";\r\n                for (let i = 0; i < data.length; i++){\r\n                    html += \"<li>\";\r\n                    html += \"Course: <b>\" + data[i].CourseName + \"</b></br>\";\r\n                    html += \"Quiz name: \" + data[i].QuizName;\r\n                    html += \"</br>Duration: \" + parseInt(data[i].Duration) / 60 + \"m\";\r\n                    html += \"</br><button id='\" + \"act\" + data[i].id + \"'>Activate quiz</button>\";\r\n                    html += \"<button id='\" + \"start\" + data[i].id + \"'> Start quiz</button>\";\r\n                    html += \"</li>\";\r\n                    html += \"<div id='lq\" + data[i].id  + \"'></div>\"\r\n                }\r\n                html += \"</ol>\"\r\n                $(\"#mainSection\").html(html);\r\n                for (let i = 0; i < data.length; i++){\r\n                    $(\"#act\" + data[i].id).on('click', function(){\r\n                        var id = $(this).attr('id').replace('act', '');\r\n                        $.post(endpoint + \"activateQuiz?\" + getParamCredentials() + \"&quizID=\" + id, function(data){\r\n                            $(\"#act\" + id).attr('disabled', true);\r\n                            console.log(data);\r\n                            $(\"#lq\" + id).html(\"<h4>Access code: \" + data.AccessCode + \"</h4>\");\r\n                            let ws = new WebSocket(\"ws://79.115.188.173:8081\");\r\n                            ws.onopen = function(openiningData){\r\n                                $(\"#lq\" + id).append(\"Waiting for students to join...\");\r\n                                $(\"#lq\" + id).append(\"<div id='wssarea'></div>\");\r\n                            };\r\n\r\n                            ws.onclose = function(closingData){\r\n                                console.log(\"Something happened and connection ws#\" + id + \" was closed.\");\r\n                            };\r\n\r\n                            ws.onmessage = function(message){\r\n                                try{\r\n                                    let res = JSON.parse(message.data);\r\n                                    let liveData = res.Data;\r\n                                    console.log(liveData);\r\n                                    $(\"#wssarea\").html(\"\");\r\n                                    for (let i = 0; i < Object.keys(liveData).length; i++){\r\n                                        let cc = Object.keys(liveData)[i];\r\n                                        let cd = liveData[cc];\r\n                                        console.log(cd);\r\n                                        let ci = parseInt(cd.Answers.length);\r\n                                        let ti = ci + parseInt(cd.LeftQuestions.length);\r\n                                        let percent = ci * 100 / ti;\r\n                                        $(\"#wssarea\").append(\"<div class='myProgress'><div class='myBar' style='width:\" + percent +\"%'>\" + ci + \"/\" + ti + \"</div></div>\");\r\n                                    }\r\n                                }\r\n                                catch(e){\r\n                                    console.log(e);\r\n                                }\r\n                            };\r\n                        });\r\n                    });\r\n                    $(\"#start\" + data[i].id).on('click', function(){\r\n                        var id = $(this).attr('id').replace('start', '');\r\n                        $.post(endpoint + \"startQuiz?\" + getParamCredentials() + \"&quizID=\" + id, function(data){\r\n                            $(\"#start\" + id).attr('disabled', true);\r\n                            console.log(data);\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        function getParamCredentials(){\r\n            return \"sk=\" + localStorage.getItem('sk');\r\n        }\r\n    }\r\n}\r\n\r\nexport default startQuizPage;"]},"metadata":{},"sourceType":"module"}